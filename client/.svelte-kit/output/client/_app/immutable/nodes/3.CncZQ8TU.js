import{a as _,f as I}from"../chunks/BFfIV2Jx.js";import{p as M,t as y,g as a,a as z,s as r,b as n,c,d as s,r as o}from"../chunks/CTMsHKgE.js";import{d as B,e as F,s as k}from"../chunks/BKQy3XBz.js";import{i as L}from"../chunks/DeM2r7LR.js";import{b as A,r as E,a as G}from"../chunks/CbIFq4Pm.js";import{g as H}from"../chunks/ByCQATkF.js";var K=I('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"> </div>'),Q=I('<div class="mt-4 p-3 bg-gray-100 rounded text-xs"> </div>'),V=I('<div class="min-h-screen flex items-center justify-center px-4 bg-gradient-to-br from-primary-50 to-blue-100"><div class="w-full max-w-md"><div class="bg-white rounded-2xl shadow-xl p-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-primary-600 mb-2">Open Mobile TTS</h1> <p class="text-gray-600">Sign in to continue</p></div> <form class="space-y-6"><!> <div><label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label> <input id="username" type="text" required class="input" placeholder="admin"/></div> <div><label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label> <input id="password" type="password" required class="input" placeholder="testpassword123"/></div> <button type="submit" class="btn btn-primary w-full"> </button> <button type="button" class="btn btn-secondary w-full">Test API Connection</button></form> <!></div></div></div>');function te(j,O){M(O,!0);let p=c(""),f=c(""),m=c(""),i=c(!1),l=c("");async function q(){r(l,"Testing API connection...");try{const t=await(await fetch("http://localhost:8000/health")).json();r(l,"API works! "+JSON.stringify(t))}catch(e){r(l,"API Error: "+e.message)}}async function C(){r(m,""),r(l,""),r(i,!0),console.log("Login attempt:",a(p));try{const e=await fetch("http://localhost:8000/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:a(p),password:a(f)})});if(console.log("Response status:",e.status),!e.ok){const d=await e.text();throw console.error("Login failed:",d),new Error("Invalid username or password")}const t=await e.json();if(console.log("Login success:",t),t.access_token)G.setToken(t.access_token),H("/player");else throw new Error("No access token received")}catch(e){console.error("Error:",e),r(m,e.message||"Login failed",!0)}finally{r(i,!1)}}var b=V(),P=s(b),S=s(P),u=n(s(S),2),T=s(u);{var N=e=>{var t=K(),d=s(t,!0);o(t),y(()=>k(d,a(m))),_(e,t)};L(T,e=>{a(m)&&e(N)})}var g=n(T,2),w=n(s(g),2);E(w),o(g);var h=n(g,2),x=n(s(h),2);E(x),o(h);var v=n(h,2),R=s(v,!0);o(v);var U=n(v,2);U.__click=q,o(u);var D=n(u,2);{var J=e=>{var t=Q(),d=s(t,!0);o(t),y(()=>k(d,a(l))),_(e,t)};L(D,e=>{a(l)&&e(J)})}o(S),o(P),o(b),y(()=>{w.disabled=a(i),x.disabled=a(i),v.disabled=a(i),k(R,a(i)?"Signing in...":"Sign In")}),F("submit",u,e=>{e.preventDefault(),C()}),A(w,()=>a(p),e=>r(p,e)),A(x,()=>a(f),e=>r(f,e)),_(j,b),z()}B(["click"]);export{te as component};
