import{o as i,M as k,T as m,U as S,V as A,W as b,X as g,Y as y,Z as E,h as T,L as M,z as l,_ as I}from"./CTMsHKgE.js";import{w as L}from"./e1lkKKbt.js";const N=Symbol("is custom element"),w=Symbol("is html");function R(e){if(i){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;d(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var s=e.checked;d(e,"checked",null),e.checked=s}}};e.__on_r=r,k(r),m()}}function d(e,a,r,t){var s=O(e);i&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[S]=r),r==null?e.removeAttribute(a):typeof r!="string"&&U(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function O(e){return e.__attributes??(e.__attributes={[N]:e.nodeName.includes("-"),[w]:e.namespaceURI===A})}var h=new Map;function U(e){var a=e.getAttribute("is")||e.nodeName,r=h.get(a);if(r)return r;h.set(a,r=[]);for(var t,s=e,o=Element.prototype;o!==s;){t=g(s);for(var c in t)t[c].set&&r.push(c);s=b(s)}return r}function W(e,a,r=a){var t=new WeakSet;y(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=v(e)?_(o):o,r(o),l!==null&&t.add(l),await E(),o!==(o=a())){var c=e.selectionStart,f=e.selectionEnd,u=e.value.length;if(e.value=o??"",f!==null){var n=e.value.length;c===f&&f===u&&n>u?(e.selectionStart=n,e.selectionEnd=n):(e.selectionStart=c,e.selectionEnd=Math.min(f,n))}}}),(i&&e.defaultValue!==e.value||T(a)==null&&e.value)&&(r(v(e)?_(e.value):e.value),l!==null&&t.add(l)),M(()=>{var s=a();if(e===document.activeElement){var o=I??l;if(t.has(o))return}v(e)&&s===_(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function v(e){var a=e.type;return a==="number"||a==="range"}function _(e){return e===""?null:+e}function V(){const e=localStorage.getItem("access_token"),{subscribe:a,set:r,update:t}=L({token:e,isAuthenticated:!!e});return{subscribe:a,setToken:s=>{localStorage.setItem("access_token",s),r({token:s,isAuthenticated:!0})},clearToken:()=>{localStorage.removeItem("access_token"),r({token:null,isAuthenticated:!1})}}}const Y=V();export{Y as a,W as b,R as r,d as s};
