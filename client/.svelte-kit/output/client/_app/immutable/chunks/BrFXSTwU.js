import{y as u,q as w,V as y,W as S,X as k,Y as A,Z as E,_ as b,$ as T,u as g,r as L,j as c,a0 as p}from"./BeJc0bxu.js";const M=Symbol("is custom element"),I=Symbol("is html");function D(e){if(u){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var o=e.value;h(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var s=e.checked;h(e,"checked",null),e.checked=s}}};e.__on_r=r,w(r),y()}}function h(e,a,r,o){var s=N(e);u&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[S]=r),r==null?e.removeAttribute(a):typeof r!="string"&&$(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function N(e){return e.__attributes??(e.__attributes={[M]:e.nodeName.includes("-"),[I]:e.namespaceURI===k})}var m=new Map;function $(e){var a=e.getAttribute("is")||e.nodeName,r=m.get(a);if(r)return r;m.set(a,r=[]);for(var o,s=e,t=Element.prototype;t!==s;){o=E(s);for(var n in o)o[n].set&&r.push(n);s=A(s)}return r}function O(e,a,r=a){var o=new WeakSet;b(e,"input",async s=>{var t=s?e.defaultValue:e.value;if(t=i(e)?d(t):t,r(t),c!==null&&o.add(c),await T(),t!==(t=a())){var n=e.selectionStart,f=e.selectionEnd,_=e.value.length;if(e.value=t??"",f!==null){var l=e.value.length;n===f&&f===_&&l>_?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=n,e.selectionEnd=Math.min(f,l))}}}),(u&&e.defaultValue!==e.value||g(a)==null&&e.value)&&(r(i(e)?d(e.value):e.value),c!==null&&o.add(c)),L(()=>{var s=a();if(e===document.activeElement){var t=p??c;if(o.has(t))return}i(e)&&s===d(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function i(e){var a=e.type;return a==="number"||a==="range"}function d(e){return e===""?null:+e}const v="http://localhost:8000";async function R(e,a){const r=new URLSearchParams;r.append("username",e),r.append("password",a);const o=await fetch(`${v}/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!o.ok)throw new Error("Invalid username or password");return o.json()}async function U(e,a,r,o){const s=new URLSearchParams({text:e,voice:a||"af_heart",speed:(r==null?void 0:r.toString())||"1.0"}),t=await fetch(`${v}/api/tts/stream?${s}`,{headers:{Authorization:`Bearer ${o}`}});if(!t.ok)throw new Error("Failed to generate speech");return t}async function j(e,a){const r=new FormData;r.append("file",e);const o=await fetch(`${v}/api/documents/upload`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:r});if(!o.ok)throw new Error("Failed to upload document");return o.json()}export{U as a,O as b,R as l,D as r,h as s,j as u};
